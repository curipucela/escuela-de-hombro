<!DOCTYPE html>
<html>
<head>
    <title>Rehabilitación de Hombro</title>
</head>
<body>
    <h1>Rehabilitación de Hombro</h1>

    <form id="rehabForm">
        <h2>Entrenamiento Realizado</h2>
        <label for="flexionEntrenamiento">Flexión anterior:</label>
        <select id="flexionEntrenamiento">
            <option value="1">Ejercicios pendulares</option>
            <option value="2">Ejercicios pendulares + Movilidad activo-asistida</option>
            <option value="3">Ejercicios pendulares + Movilidad activa</option>
            <option value="4">Ejercicios pendulares + Movilidad activa + Fortalecimiento con 0 kg</option>
            <option value="5">Ejercicios pendulares + Movilidad activa + Fortalecimiento con 2 kg</option>
            <option value="6">Ejercicios pendulares + Movilidad activa + Fortalecimiento con 4 kg</option>
        </select><br>

        <label for="abduccionEntrenamiento">Abducción:</label>
        <select id="abduccionEntrenamiento">
            <option value="1">Ejercicios pendulares</option>
            <option value="2">Ejercicios pendulares + Movilidad activo-asistida</option>
            <option value="3">Ejercicios pendulares + Movilidad activa</option>
            <option value="4">Ejercicios pendulares + Movilidad activa + Fortalecimiento con 0 kg</option>
            <option value="5">Ejercicios pendulares + Movilidad activa + Fortalecimiento con 2 kg</option>
            <option value="6">Ejercicios pendulares + Movilidad activa + Fortalecimiento con 4 kg</option>
        </select><br>

        <label for="rotacionExternaEntrenamiento">Rotación externa:</label>
        <select id="rotacionExternaEntrenamiento">
            <option value="1">Ejercicios pendulares</option>
            <option value="2">Ejercicios pendulares + Movilidad activo-asistida</option>
            <option value="3">Ejercicios pendulares + Movilidad activa</option>
            <option value="4">Ejercicios pendulares + Movilidad activa + Fortalecimiento con 0 kg</option>
            <option value="5">Ejercicios pendulares + Movilidad activa + Fortalecimiento con 2 kg</option>
            <option value="6">Ejercicios pendulares + Movilidad activa + Fortalecimiento con 4 kg</option>
        </select><br>

        <label for="rotacionInternaEntrenamiento">Rotación interna:</label>
        <select id="rotacionInternaEntrenamiento">
            <option value="1">Ejercicios pendulares</option>
            <option value="2">Ejercicios pendulares + Movilidad activo-asistida</option>
            <option value="3">Ejercicios pendulares + Movilidad activa</option>
            <option value="4">Ejercicios pendulares + Movilidad activa + Fortalecimiento con 0 kg</option>
            <option value="5">Ejercicios pendulares + Movilidad activa + Fortalecimiento con 2 kg</option>
            <option value="6">Ejercicios pendulares + Movilidad activa + Fortalecimiento con 4 kg</option>
        </select><br>

        <h2>Escala EVA del Dolor</h2>
        <label for="evaPost">Escala EVA post-entreno:</label>
        <input type="number" id="evaPost" min="0" max="10"><br>
        <label for="evaPre">Escala EVA pre-entreno:</label>
        <input type="number" id="evaPre" min="0" max="10"><br>

        <h2>Valoración de cansancio muscular</h2>
        <label for="borgPost">Post-sesión de entrenamiento:</label>
        <input type="number" id="borgPost" min="0" max="10"><br>
        <label for="borgPre">Antes del siguiente entrenamiento:</label>
        <input type="number" id="borgPre" min="0" max="10"><br>

        <h2>Escala de Balance Articular</h2>
        <label for="flexion">Flexión anterior:</label>
        <select id="flexion">
            <option value="1">No tocarse labios</option>
            <option value="2">Tocarse labios</option>
            <option value="3">Hombro recto</option>
            <option value="4">Tocarse parte superior de la cabeza</option>
            <option value="5">Llegar a nuca</option>
        </select><br>

        <label for="abduccion">Abducción:</label>
        <select id="abduccion">
            <option value="1">No mano a cintura</option>
            <option value="2">Mano a cintura</option>
            <option value="3">Cruz de ángulo recto</option>
            <option value="4">Tocarse la cabeza</option>
            <option value="5">Tocarse la oreja</option>
        </select><br>

        <label for="rotacionExterna">Rotación externa:</label>
        <select id="rotacionExterna">
            <option value="1">Mano detrás de la cabeza y codos delante</option>
            <option value="2">Mano detrás de la cabeza y codos detrás</option>
            <option value="3">Mano sobre la cabeza y codos delante</option>
            <option value="4">Mano sobre la cabeza y codos detrás</option>
            <option value="5">Elevación completa del brazo</option>
        </select><br>

        <label for="rotacionInterna">Rotación interna (pulgar hasta):</label>
        <select id="rotacionInterna">
            <option value="1">Muslo</option>
            <option value="2">Nalga</option>
            <option value="3">Sacro</option>
            <option value="4">Cintura</option>
            <option value="5">Entre las escápulas</option>
        </select><br>

        <button type="button" onclick="calcularEntrenamiento()">Calcular Entrenamiento Sugerido</button>
    </form>

    <h2>Resultado</h2>
    <p id="resultado"></p>

    <script>
        function calcularEntrenamiento() {
            const evaPost = parseFloat(document.getElementById('evaPost').value);
            const evaPre = parseFloat(document.getElementById('evaPre').value);
            const eva = 0.3 * evaPost + 0.7 * evaPre;

            const borgPost = parseFloat(document.getElementById('borgPost').value);
            const borgPre = parseFloat(document.getElementById('borgPre').value);
            const borgPonderada = 0.3 * borgPost + 0.7 * borgPre;

            const flexion = parseFloat(document.getElementById('flexion').value);
            const abduccion = parseFloat(document.getElementById('abduccion').value);
            const rotacionExterna = parseFloat(document.getElementById('rotacionExterna').value);
            const rotacionInterna = parseFloat(document.getElementById('rotacionInterna').value);
            
            const flexionEntrenamiento = parseFloat(document.getElementById('flexionEntrenamiento').value);
            const abduccionEntrenamiento = parseFloat(document.getElementById('abduccionEntrenamiento').value);
            const rotacionExternaEntrenamiento = parseFloat(document.getElementById('rotacionExternaEntrenamiento').value);
            const rotacionInternaEntrenamiento = parseFloat(document.getElementById('rotacionInternaEntrenamiento').value);

            const entrenamientos = [
                "Ejercicios pendulares",
                "Ejercicios pendulares + Movilidad activo-asistida",
                "Ejercicios pendulares + Movilidad activa",
                "Ejercicios pendulares + Movilidad activa + Fortalecimiento con 0 kg",
                "Ejercicios pendulares + Movilidad activa + Fortalecimiento con 2 kg",
                "Ejercicios pendulares + Movilidad activa + Fortalecimiento con 4 kg"
            ];

            function calcularSugerencia(eva, balance, entrenamiento) {
                if (eva >= 8) {
                    return 0; // Ejercicios pendulares
                } else if (balance <= 3) {
                    if (eva - (balance * 2) >= 3) {
                        return 1; // Ejercicios pendulares + Movilidad activo-asistida
                    } else {
                        return 2; // Ejercicios pendulares + Movilidad activa
                    }
                } else {
                    if (borgPonderada >= 8) {
                        return Math.max(entrenamiento - 1, 3); // Min: Ejercicios pendulares + Movilidad activa + Fortalecimiento con 0 kg
                    } else if (borgPonderada >= 4) {
                        if (entrenamiento === 2) {
                            return 3; // Ejercicios pendulares + Movilidad activa + Fortalecimiento con 0 kg
                        } else {
                            return entrenamiento; // Repetir el último ejercicio realizado
                        }
                    } else {
                        return Math.min(entrenamiento + 1, 5); // Max: Ejercicios pendulares + Movilidad activa + Fortalecimiento con 4 kg
                    }
                }
            }

            const flexionSugerencia = entrenamientos[calcularSugerencia(eva, flexion, flexionEntrenamiento - 1)];
            const abduccionSugerencia = entrenamientos[calcularSugerencia(eva, abduccion, abduccionEntrenamiento - 1)];
            const rotacionExternaSugerencia = entrenamientos[calcularSugerencia(eva, rotacionExterna, rotacionExternaEntrenamiento - 1)];
            const rotacionInternaSugerencia = entrenamientos[calcularSugerencia(eva, rotacionInterna, rotacionInternaEntrenamiento - 1)];

            let resultado = "";
            resultado += "Flexión anterior: " + flexionSugerencia + "<br>";
            resultado += "Abducción: " + abduccionSugerencia + "<br>";
            resultado += "Rotación externa: " + rotacionExternaSugerencia + "<br>";
            resultado += "Rotación interna: " + rotacionInternaSugerencia + "<br>";

            document.getElementById('resultado').innerHTML = resultado;
        }
    </script>
</body>
</html>
